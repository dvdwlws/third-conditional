<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Third Conditional: Steve and Sarah's Reflections</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .progress-bar {
            background: #f0f0f0;
            height: 8px;
            position: relative;
        }

        .progress-fill {
            background: linear-gradient(90deg, #f093fb 0%, #f5576c 100%);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .content {
            padding: 40px;
        }

        .story-section {
            display: none;
            animation: fadeIn 0.5s;
        }

        .story-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .story-box {
            background: #f8f9fa;
            border-left: 4px solid #f093fb;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            max-height: 500px;
            overflow-y: auto;
        }

        .story-box h3 {
            color: #f5576c;
            margin-bottom: 15px;
        }

        .story-box p {
            line-height: 1.8;
            color: #333;
            margin-bottom: 12px;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 600;
        }

        .grammar-box {
            background: #e7f3ff;
            border: 2px solid #2196F3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }

        .grammar-box h3 {
            color: #2196F3;
            margin-bottom: 15px;
        }

        .formula {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            text-align: center;
            border: 2px solid #2196F3;
        }

        .example-box {
            background: #f0f8ff;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #2196F3;
        }

        .exercise-box {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 25px;
            margin: 20px 0;
            border-radius: 10px;
        }

        .exercise-box h3 {
            color: #f5576c;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .question {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            padding: 12px 15px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: #f093fb;
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #f093fb;
            background: #fef5ff;
        }

        .option.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        input[type="text"] {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 1em;
            width: 200px;
            transition: border 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #f093fb;
        }

        input[type="text"].correct {
            border-color: #28a745;
            background: #d4edda;
        }

        input[type="text"].incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .gap-fill {
            margin: 15px 0;
            line-height: 2.5;
        }

        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
        }

        button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(240, 147, 251, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }

        .feedback.show {
            display: block;
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback.correct {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            border: 2px solid #dc3545;
            color: #721c24;
        }

        .score {
            text-align: center;
            font-size: 1.2em;
            margin: 20px 0;
            color: #f5576c;
            font-weight: 600;
        }

        .completion {
            text-align: center;
            padding: 40px;
        }

        .completion h2 {
            color: #f5576c;
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .completion .trophy {
            font-size: 5em;
            margin: 20px 0;
        }

        .navigation-dots {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 20px 0;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e0e0e0;
            transition: all 0.3s;
        }

        .dot.active {
            background: #f093fb;
            width: 30px;
            border-radius: 6px;
        }

        .dot.completed {
            background: #28a745;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th, .comparison-table td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: left;
        }

        .comparison-table th {
            background: #f093fb;
            color: white;
        }

        .comparison-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.5em;
            }
            
            input[type="text"] {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚èÆÔ∏è Third Conditional: Looking Back</h1>
            <p>Learn about past regrets and missed opportunities with Steve and Sarah</p>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <div class="navigation-dots" id="navigationDots"></div>

        <div class="content">
            <!-- Section 0: Story -->
            <div class="story-section active" id="section0">
                <h2 style="color: #f5576c; margin-bottom: 20px;">üìñ Friday Evening: Steve and Sarah Meet</h2>
                
                <div class="story-box">
                    <p>Steve pushed open the door to the coffee shop, spotting Sarah at a corner table. They'd been introduced by a mutual friend earlier in the week, and somehow they'd ended up here on Friday evening, two strangers commiserating over another week gone by.</p>
                    
                    <p>"How was your week?" Sarah asked as Steve sat down.</p>
                    
                    <p>He sighed. "You know that feeling when you realize you could've done everything differently?"</p>
                    
                    <h3>Steve's Reflections</h3>
                    <p>"I didn't call my brother on Monday. <span class="highlight">If I had called him, we would have talked.</span> <span class="highlight">If we'd talked, maybe we would have made plans for Thursday.</span> <span class="highlight">If we had met up, we might have finally cleared the air about Dad.</span> But I didn't, so we didn't, and here we are‚Äîstill not talking."</p>
                    
                    <p>"And that networking event on Wednesday? I stayed home. <span class="highlight">If I had gone, I would have met at least a few people.</span> <span class="highlight">If I'd met them, I might have gotten some business cards.</span> <span class="highlight">If I had followed up with them, one of them might have mentioned a job opening.</span> But I didn't go, so none of that happened."</p>
                    
                    <p>"The worst part? I saw Jennifer in the break room on Friday morning. <span class="highlight">If I had asked her to lunch right then, she might have said yes.</span> <span class="highlight">If she'd said yes, we would have gone to that Italian place down the street.</span> <span class="highlight">If we had gone, I would have finally known whether there was any point in wondering about her.</span> But I chickened out, so now I'll spend another week imagining conversations we'll never have."</p>
                    
                    <h3>Sarah's Reflections</h3>
                    <p>"Well, <span class="highlight">if I had won the lottery on Tuesday‚Äîwhich obviously I didn't‚ÄîI would have quit my job immediately.</span> <span class="highlight">If I'd quit, I would have told Martin exactly what I thought of his micromanaging.</span> <span class="highlight">If I'd done that, I would have felt amazing for about five minutes before realizing I had no income.</span> But none of that happened because I didn't win, so I'm still in the same cubicle."</p>
                    
                    <p>"And <span class="highlight">if I had been brave enough to dye my hair purple on Tuesday‚Äîwhich I wasn't‚Äîeveryone would have stared at me on Wednesday.</span> <span class="highlight">If they had stared, I would have felt self-conscious but also kind of proud.</span> But I didn't dye it, so nothing changed."</p>
                    
                    <p>"<span class="highlight">If I had submitted my photography to that gallery on Thursday‚Äîwhich I didn't‚Äîthey might have called me back.</span> <span class="highlight">If they'd called, I would have been terrified and excited.</span> <span class="highlight">If they had liked my work, the opening would have been tomorrow night.</span> But I didn't submit anything, so tomorrow will be just like every other Saturday."</p>
                    
                    <h3>The Realization</h3>
                    <p>"You know what's funny?" Steve said. "<span class="highlight">If I had known on Monday what I know now, I would have made different choices.</span> <span class="highlight">If I'd made different choices, this week would have been completely different.</span>"</p>
                    
                    <p>"<span class="highlight">If I had focused on one small, real thing instead of impossible dreams, I might have actually done it.</span> <span class="highlight">If I'd done it, I'd have something to show for the week.</span>"</p>
                    
                    <p>"<span class="highlight">If I hadn't met you tonight, I probably would have spent the weekend beating myself up about this week.</span>"</p>
                    
                    <p>"<span class="highlight">If we hadn't talked, I would have just gone home and thought about all the things I didn't do.</span>"</p>
                </div>

                <div class="buttons">
                    <button class="btn-primary" onclick="nextSection()">Learn the Grammar ‚Üí</button>
                </div>
            </div>

            <!-- Section 1: Grammar Explanation -->
            <div class="story-section" id="section1">
                <h2 style="color: #f5576c; margin-bottom: 20px;">üìö Understanding the Third Conditional</h2>
                
                <div class="grammar-box">
                    <h3>What is the Third Conditional?</h3>
                    <p>The third conditional talks about <strong>past situations that didn't happen</strong> and imagines different results. We use it for:</p>
                    <ul style="margin: 15px 0; line-height: 2;">
                        <li>üí≠ <strong>Regrets</strong> - "If I had studied harder, I would have passed"</li>
                        <li>ü§î <strong>Criticisms</strong> - "If you had told me, I would have helped"</li>
                        <li>üòî <strong>Missed opportunities</strong> - "If I had applied, I might have got the job"</li>
                        <li>‚ú® <strong>Imagining different past outcomes</strong> - "If she had come, the party would have been more fun"</li>
                    </ul>
                </div>

                <div class="grammar-box">
                    <h3>The Structure</h3>
                    <div class="formula">
                        If + past perfect, would have + past participle
                    </div>
                    <div class="formula">
                        If + had + past participle, would have + past participle
                    </div>
                    
                    <div class="example-box">
                        <strong>Examples from the story:</strong><br><br>
                        ‚úì If I <strong>had called</strong> him, we <strong>would have talked</strong>.<br>
                        ‚úì If I <strong>had gone</strong>, I <strong>would have met</strong> at least a few people.<br>
                        ‚úì If she <strong>had submitted</strong> her photography, they <strong>might have called</strong> her back.
                    </div>

                    <h3 style="margin-top: 20px;">Contractions (Very Common!)</h3>
                    <div class="example-box">
                        ‚Ä¢ If I <strong>had</strong> known ‚Üí If I <strong>'d</strong> known<br>
                        ‚Ä¢ we <strong>would have</strong> talked ‚Üí we <strong>'d have</strong> talked OR we <strong>would've</strong> talked<br>
                        ‚Ä¢ she <strong>would have</strong> been ‚Üí she <strong>'d have</strong> been OR she <strong>would've</strong> been
                    </div>

                    <h3 style="margin-top: 20px;">Other Modal Verbs</h3>
                    <p>Instead of "would have," we can also use:</p>
                    <div class="example-box">
                        ‚Ä¢ <strong>might have</strong> - uncertainty: "If I'd applied, I <strong>might have</strong> got the job"<br>
                        ‚Ä¢ <strong>could have</strong> - ability/possibility: "If I'd practiced, I <strong>could have</strong> played better"<br>
                        ‚Ä¢ <strong>should have</strong> - advice (rare): "If you'd asked, I <strong>should have</strong> told you"
                    </div>
                </div>

                <div class="grammar-box">
                    <h3>Comparing the Conditionals</h3>
                    <table class="comparison-table">
                        <tr>
                            <th>Conditional</th>
                            <th>Time</th>
                            <th>Reality</th>
                            <th>Example</th>
                        </tr>
                        <tr>
                            <td><strong>First</strong></td>
                            <td>Future</td>
                            <td>Real possibility</td>
                            <td>If I call him, we'll talk</td>
                        </tr>
                        <tr>
                            <td><strong>Second</strong></td>
                            <td>Present/Future</td>
                            <td>Unreal/Unlikely</td>
                            <td>If I won the lottery, I'd quit</td>
                        </tr>
                        <tr>
                            <td><strong>Third</strong></td>
                            <td>Past</td>
                            <td>Impossible (didn't happen)</td>
                            <td>If I had called him, we would have talked</td>
                        </tr>
                    </table>
                </div>

                <div class="buttons">
                    <button class="btn-secondary" onclick="prevSection()">‚Üê Back</button>
                    <button class="btn-primary" onclick="nextSection()">Start Exercises ‚Üí</button>
                </div>
            </div>

            <!-- Section 2: Identify the Pattern -->
            <div class="story-section" id="section2">
                <h2 style="color: #f5576c; margin-bottom: 20px;">Exercise 1: Identify the Pattern</h2>
                
                <div class="exercise-box">
                    <h3>Find the Third Conditional Sentences</h3>
                    <p style="margin-bottom: 20px;">Which sentences use the third conditional (talking about the past)?</p>
                    
                    <div class="question">
                        <div class="question-text">1. "If I call my brother tonight, we'll probably talk."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'no')">Not third conditional</div>
                            <div class="option" onclick="selectOption(this, 'yes')">Third conditional</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">2. "If I had called him, we would have talked."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'no')">Not third conditional</div>
                            <div class="option" onclick="selectOption(this, 'yes')">Third conditional</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">3. "If she won the lottery, she'd quit her job."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'no')">Not third conditional</div>
                            <div class="option" onclick="selectOption(this, 'yes')">Third conditional</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">4. "If I had gone to the event, I would have met people."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'no')">Not third conditional</div>
                            <div class="option" onclick="selectOption(this, 'yes')">Third conditional</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">5. "If I had magical powers, I'd transform my apartment."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'no')">Not third conditional</div>
                            <div class="option" onclick="selectOption(this, 'yes')">Third conditional</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">6. "If I hadn't met you tonight, I would have spent the weekend alone."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'no')">Not third conditional</div>
                            <div class="option" onclick="selectOption(this, 'yes')">Third conditional</div>
                        </div>
                    </div>

                    <div class="feedback" id="feedback2"></div>
                    
                    <div class="buttons">
                        <button class="btn-secondary" onclick="prevSection()">‚Üê Back</button>
                        <button class="btn-primary" onclick="checkAnswers2()">Check Answers</button>
                        <button class="btn-success" onclick="nextSection()" style="display:none;" id="next2">Next Exercise ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Section 3: Complete the Sentences -->
            <div class="story-section" id="section3">
                <h2 style="color: #f5576c; margin-bottom: 20px;">Exercise 2: Complete the Sentences</h2>
                
                <div class="exercise-box">
                    <h3>Fill in the Correct Forms</h3>
                    <p style="margin-bottom: 20px;">Complete these sentences from Steve and Sarah's reflections.</p>
                    
                    <div class="question">
                        <div class="gap-fill">
                            1. If Steve <input type="text" id="q3_1" placeholder="call"> his brother, they <input type="text" id="q3_1b" placeholder="talk">.
                        </div>
                    </div>

                    <div class="question">
                        <div class="gap-fill">
                            2. If Steve <input type="text" id="q3_2" placeholder="go"> to the networking event, he <input type="text" id="q3_2b" placeholder="meet"> some people.
                        </div>
                    </div>

                    <div class="question">
                        <div class="gap-fill">
                            3. If Steve <input type="text" id="q3_3" placeholder="ask"> Jennifer to lunch, she <input type="text" id="q3_3b" placeholder="say"> yes.
                        </div>
                    </div>

                    <div class="question">
                        <div class="gap-fill">
                            4. If Sarah <input type="text" id="q3_4" placeholder="win"> the lottery, she <input type="text" id="q3_4b" placeholder="quit"> her job.
                        </div>
                    </div>

                    <div class="question">
                        <div class="gap-fill">
                            5. If Sarah <input type="text" id="q3_5" placeholder="submit"> her photography, the gallery <input type="text" id="q3_5b" placeholder="call"> her back.
                        </div>
                    </div>

                    <div class="question">
                        <div class="gap-fill">
                            6. If they <input type="text" id="q3_6" placeholder="not meet">, they <input type="text" id="q3_6b" placeholder="spend"> the weekend feeling lonely.
                        </div>
                    </div>

                    <div class="feedback" id="feedback3"></div>
                    
                    <div class="buttons">
                        <button class="btn-secondary" onclick="prevSection()">‚Üê Back</button>
                        <button class="btn-primary" onclick="checkAnswers3()">Check Answers</button>
                        <button class="btn-success" onclick="nextSection()" style="display:none;" id="next3">Next Exercise ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Section 4: Match the Halves -->
            <div class="story-section" id="section4">
                <h2 style="color: #f5576c; margin-bottom: 20px;">Exercise 3: What Really Happened?</h2>
                
                <div class="exercise-box">
                    <h3>Understanding the Reality</h3>
                    <p style="margin-bottom: 20px;">For each third conditional sentence, what ACTUALLY happened? Choose the correct reality.</p>
                    
                    <div class="question">
                        <div class="question-text">"If I had called my brother, we would have talked."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'called')">Steve called his brother and they talked</div>
                            <div class="option" onclick="selectOption(this, 'didnt')">Steve didn't call his brother, so they didn't talk</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">"If I had gone to the event, I would have met people."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'went')">Steve went to the event and met people</div>
                            <div class="option" onclick="selectOption(this, 'stayed')">Steve stayed home and didn't meet anyone</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">"If I had submitted my photography, they might have called."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'submitted')">Sarah submitted her photography</div>
                            <div class="option" onclick="selectOption(this, 'didnt')">Sarah didn't submit her photography</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">"If I had been brave, everyone would have stared."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'brave')">Sarah was brave and people stared</div>
                            <div class="option" onclick="selectOption(this, 'wasnt')">Sarah wasn't brave, so people didn't stare</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">"If we hadn't met tonight, I would have gone home alone."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'didnt')">They didn't meet, so Sarah went home alone</div>
                            <div class="option" onclick="selectOption(this, 'met')">They met tonight, so Sarah didn't go home alone</div>
                        </div>
                    </div>

                    <div class="feedback" id="feedback4"></div>
                    
                    <div class="buttons">
                        <button class="btn-secondary" onclick="prevSection()">‚Üê Back</button>
                        <button class="btn-primary" onclick="checkAnswers4()">Check Answers</button>
                        <button class="btn-success" onclick="nextSection()" style="display:none;" id="next4">Next Exercise ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Section 5: Your Own Sentences -->
            <div class="story-section" id="section5">
                <h2 style="color: #f5576c; margin-bottom: 20px;">Exercise 4: Create Regrets</h2>
                
                <div class="exercise-box">
                    <h3>Change Past Simple to Third Conditional</h3>
                    <p style="margin-bottom: 20px;">Turn these statements about what happened into regrets using the third conditional.</p>
                    
                    <div class="question">
                        <div class="question-text">1. "I didn't study, so I failed the test."</div>
                        <div class="gap-fill">
                            If I <input type="text" id="q5_1" placeholder="study">, I <input type="text" id="q5_1b" placeholder="not fail"> the test.
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">2. "She didn't take an umbrella, so she got wet."</div>
                        <div class="gap-fill">
                            If she <input type="text" id="q5_2" placeholder="take"> an umbrella, she <input type="text" id="q5_2b" placeholder="not get"> wet.
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">3. "We arrived late, so we missed the beginning."</div>
                        <div class="gap-fill">
                            If we <input type="text" id="q5_3" placeholder="not arrive"> late, we <input type="text" id="q5_3b" placeholder="not miss"> the beginning.
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">4. "He didn't save money, so he couldn't buy the car."</div>
                        <div class="gap-fill">
                            If he <input type="text" id="q5_4" placeholder="save"> money, he <input type="text" id="q5_4b" placeholder="buy"> the car.
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">5. "They didn't book early, so they didn't get good seats."</div>
                        <div class="gap-fill">
                            If they <input type="text" id="q5_5" placeholder="book"> early, they <input type="text" id="q5_5b" placeholder="get"> good seats.
                        </div>
                    </div>

                    <div class="feedback" id="feedback5"></div>
                    
                    <div class="buttons">
                        <button class="btn-secondary" onclick="prevSection()">‚Üê Back</button>
                        <button class="btn-primary" onclick="checkAnswers5()">Check Answers</button>
                        <button class="btn-success" onclick="nextSection()" style="display:none;" id="next5">Next Exercise ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Section 6: Mixed Conditionals Review -->
            <div class="story-section" id="section6">
                <h2 style="color: #f5576c; margin-bottom: 20px;">Exercise 5: Which Conditional?</h2>
                
                <div class="exercise-box">
                    <h3>First, Second, or Third Conditional?</h3>
                    <p style="margin-bottom: 20px;">Identify which type of conditional each sentence uses.</p>
                    
                    <div class="question">
                        <div class="question-text">1. "If I had studied harder, I would have passed."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'first')">First - real future possibility</div>
                            <div class="option" onclick="selectOption(this, 'second')">Second - unreal present/future</div>
                            <div class="option" onclick="selectOption(this, 'third')">Third - unreal past</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">2. "If I study hard tonight, I'll pass tomorrow."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'first')">First - real future possibility</div>
                            <div class="option" onclick="selectOption(this, 'second')">Second - unreal present/future</div>
                            <div class="option" onclick="selectOption(this, 'third')">Third - unreal past</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">3. "If I were a millionaire, I'd buy a yacht."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'first')">First - real future possibility</div>
                            <div class="option" onclick="selectOption(this, 'second')">Second - unreal present/future</div>
                            <div class="option" onclick="selectOption(this, 'third')">Third - unreal past</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">4. "If he calls me later, I'll tell him the news."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'first')">First - real future possibility</div>
                            <div class="option" onclick="selectOption(this, 'second')">Second - unreal present/future</div>
                            <div class="option" onclick="selectOption(this, 'third')">Third - unreal past</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">5. "If she had known, she would have come."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'first')">First - real future possibility</div>
                            <div class="option" onclick="selectOption(this, 'second')">Second - unreal present/future</div>
                            <div class="option" onclick="selectOption(this, 'third')">Third - unreal past</div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">6. "If I had more time, I'd learn to play guitar."</div>
                        <div class="options">
                            <div class="option" onclick="selectOption(this, 'first')">First - real future possibility</div>
                            <div class="option" onclick="selectOption(this, 'second')">Second - unreal present/future</div>
                            <div class="option" onclick="selectOption(this, 'third')">Third - unreal past</div>
                        </div>
                    </div>

                    <div class="feedback" id="feedback6"></div>
                    
                    <div class="buttons">
                        <button class="btn-secondary" onclick="prevSection()">‚Üê Back</button>
                        <button class="btn-primary" onclick="checkAnswers6()">Check Answers</button>
                        <button class="btn-success" onclick="nextSection()" style="display:none;" id="next6">Next Exercise ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Section 7: Your Own Regrets -->
            <div class="story-section" id="section7">
                <h2 style="color: #f5576c; margin-bottom: 20px;">Exercise 6: Your Own Regrets</h2>
                
                <div class="exercise-box">
                    <h3>Reflect on Your Past Week</h3>
                    <p style="margin-bottom: 20px;">Think about your own week. What did you NOT do that you wish you had done? Write third conditional sentences about your regrets or missed opportunities.</p>
                    
                    <div class="question">
                        <div class="question-text">Example: "I didn't study on Tuesday, so I didn't do well on the test."</div>
                        <div style="font-style: italic; color: #666; margin: 10px 0;">‚Üí "If I had studied on Tuesday, I would have done well on the test."</div>
                    </div>

                    <div class="question">
                        <div class="question-text">1. Something you didn't do this week (exercise, studying, calling someone, etc.)</div>
                        <textarea id="personal1" rows="3" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; font-family: inherit; resize: vertical;" placeholder="If I had..."></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">2. A missed opportunity (social event, job application, learning opportunity)</div>
                        <textarea id="personal2" rows="3" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; font-family: inherit; resize: vertical;" placeholder="If I had..."></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">3. Something you did that you wish you hadn't done</div>
                        <textarea id="personal3" rows="3" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; font-family: inherit; resize: vertical;" placeholder="If I hadn't..."></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">4. A chain of events - what would have happened differently?</div>
                        <textarea id="personal4" rows="3" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; font-family: inherit; resize: vertical;" placeholder="If I had..., I would have..., and then..."></textarea>
                    </div>

                    <div class="grammar-box" style="margin-top: 20px;">
                        <h3>üí° Tips for Writing:</h3>
                        <ul style="line-height: 2;">
                            <li>Use <strong>If I had + past participle</strong> for the condition</li>
                            <li>Use <strong>would have / could have / might have + past participle</strong> for the result</li>
                            <li>You can use negative forms: <strong>If I hadn't...</strong></li>
                            <li>Try to think about realistic past situations, not impossible ones</li>
                        </ul>
                    </div>

                    <div class="feedback" id="feedback7"></div>
                    
                    <div class="buttons">
                        <button class="btn-secondary" onclick="prevSection()">‚Üê Back</button>
                        <button class="btn-success" onclick="savePersonalAnswers()">Save My Answers ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Section 8: Advice to Your Past Self -->
            <div class="story-section" id="section8">
                <h2 style="color: #f5576c; margin-bottom: 20px;">Exercise 7: Advice to Your Past Self</h2>
                
                <div class="exercise-box">
                    <h3>Looking Back at Important Moments</h3>
                    <p style="margin-bottom: 20px;">Think about important decisions or moments in your life. What advice would you give to your past self? Write third conditional sentences about what you would have done differently.</p>
                    
                    <div class="question">
                        <div class="question-text">Examples:</div>
                        <div style="font-style: italic; color: #666; margin: 10px 0;">
                            ‚Ä¢ "If I had known how important English would be, I would have started learning earlier."<br>
                            ‚Ä¢ "If I had been more confident in school, I would have joined more clubs."<br>
                            ‚Ä¢ "If I hadn't been afraid to travel alone, I would have visited more countries."
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">1. About your education or career</div>
                        <textarea id="advice1" rows="3" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; font-family: inherit; resize: vertical;" placeholder="If I had known/done/been..."></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">2. About relationships or friendships</div>
                        <textarea id="advice2" rows="3" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; font-family: inherit; resize: vertical;" placeholder="If I had..."></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">3. About a specific moment you would change</div>
                        <textarea id="advice3" rows="3" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; font-family: inherit; resize: vertical;" placeholder="If I had..."></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">4. Something positive - what went RIGHT because of a decision?</div>
                        <textarea id="advice4" rows="3" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; font-family: inherit; resize: vertical;" placeholder="If I hadn't..., I wouldn't have... (something good)"></textarea>
                    </div>

                    <div class="grammar-box" style="margin-top: 20px;">
                        <h3>üåü Remember:</h3>
                        <ul style="line-height: 2;">
                            <li>Not all third conditionals are negative! You can also think about good things that happened.</li>
                            <li>Example: "If I hadn't moved to this city, I wouldn't have met my best friend."</li>
                            <li>Use <strong>might have</strong> or <strong>could have</strong> for less certain outcomes</li>
                            <li>Be honest with yourself - this is for reflection and learning</li>
                        </ul>
                    </div>

                    <div class="feedback" id="feedback8"></div>
                    
                    <div class="buttons">
                        <button class="btn-secondary" onclick="prevSection()">‚Üê Back</button>
                        <button class="btn-success" onclick="saveAdviceAnswers()">Complete Exercises! üéâ</button>
                    </div>
                </div>
            </div>

            <!-- Completion Section -->
            <div class="story-section" id="section9">
                <div class="completion">
                    <div class="trophy">üèÜ</div>
                    <h2>Excellent Work!</h2>
                    <p style="font-size: 1.2em; margin: 20px 0;">You've mastered the Third Conditional!</p>
                    <div class="score" id="finalScore"></div>
                    <div style="text-align: left; max-width: 700px; margin: 30px auto; background: #f8f9fa; padding: 25px; border-radius: 10px;">
                        <h3 style="color: #f5576c; margin-bottom: 15px;">üìù Summary: All Three Conditionals</h3>
                        
                        <p style="margin: 15px 0;"><strong style="color: #667eea;">First Conditional:</strong> Real future possibilities</p>
                        <p style="margin: 5px 0 15px 20px; color: #666;">If + present simple, will + base verb<br>
                        <em>Example: If I study, I'll pass</em></p>
                        
                        <p style="margin: 15px 0;"><strong style="color: #764ba2;">Second Conditional:</strong> Unreal present/future</p>
                        <p style="margin: 5px 0 15px 20px; color: #666;">If + past simple, would + base verb<br>
                        <em>Example: If I won the lottery, I'd quit</em></p>
                        
                        <p style="margin: 15px 0;"><strong style="color: #f5576c;">Third Conditional:</strong> Unreal past (regrets)</p>
                        <p style="margin: 5px 0 15px 20px; color: #666;">If + past perfect, would have + past participle<br>
                        <em>Example: If I had studied, I would have passed</em></p>
                    </div>
                    <div class="buttons">
                        <button class="btn-primary" onclick="restartExercise()">Start Over üîÑ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSection = 0;
        const totalSections = 10;
        let scores = {
            section2: 0,
            section3: 0,
            section4: 0,
            section5: 0,
            section6: 0
        };

        // Exercise 1 Answers (Identify the Pattern)
        const answers2 = {
            q1: 'no',    // First conditional
            q2: 'yes',   // Third conditional
            q3: 'no',    // Second conditional
            q4: 'yes',   // Third conditional
            q5: 'no',    // Second conditional
            q6: 'yes'    // Third conditional
        };

        // Exercise 2 Answers (Complete the Sentences)
        const answers3 = {
            q3_1: ['had called', "'d called"],
            q3_1b: ['would have talked', "'d have talked", "would've talked"],
            q3_2: ['had gone', "'d gone"],
            q3_2b: ['would have met', "'d have met", "would've met"],
            q3_3: ['had asked', "'d asked"],
            q3_3b: ['might have said', "might've said"],
            q3_4: ['had won', "'d won"],
            q3_4b: ['would have quit', "'d have quit", "would've quit"],
            q3_5: ['had submitted', "'d submitted"],
            q3_5b: ['might have called', "might've called"],
            q3_6: ["hadn't met", 'had not met'],
            q3_6b: ['would have spent', "'d have spent", "would've spent"]
        };

        // Exercise 3 Answers (What Really Happened)
        const answers4 = {
            q1: 'didnt',
            q2: 'stayed',
            q3: 'didnt',
            q4: 'wasnt',
            q5: 'met'
        };

        // Exercise 4 Answers (Create Regrets)
        const answers5 = {
            q5_1: ['had studied', "'d studied"],
            q5_1b: ["wouldn't have failed", 'would not have failed', "wouldn't've failed"],
            q5_2: ['had taken', "'d taken"],
            q5_2b: ["wouldn't have got", 'would not have got', "wouldn't have gotten", "wouldn't've got"],
            q5_3: ["hadn't arrived", 'had not arrived'],
            q5_3b: ["wouldn't have missed", 'would not have missed', "wouldn't've missed"],
            q5_4: ['had saved', "'d saved"],
            q5_4b: ['could have bought', "could've bought"],
            q5_5: ['had booked', "'d booked"],
            q5_5b: ['would have got', "'d have got", "would've got", 'would have gotten']
        };

        // Exercise 5 Answers (Which Conditional)
        const answers6 = {
            q1: 'third',
            q2: 'first',
            q3: 'second',
            q4: 'first',
            q5: 'third',
            q6: 'second'
        };

        function updateProgress() {
            const progress = (currentSection / (totalSections - 1)) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            updateNavigationDots();
        }

        function updateNavigationDots() {
            const dotsContainer = document.getElementById('navigationDots');
            dotsContainer.innerHTML = '';
            for (let i = 0; i < totalSections; i++) {
                const dot = document.createElement('div');
                dot.className = 'dot';
                if (i === currentSection) {
                    dot.classList.add('active');
                } else if (i < currentSection) {
                    dot.classList.add('completed');
                }
                dotsContainer.appendChild(dot);
            }
        }

        function nextSection() {
            document.getElementById('section' + currentSection).classList.remove('active');
            currentSection++;
            document.getElementById('section' + currentSection).classList.add('active');
            updateProgress();
            window.scrollTo(0, 0);
        }

        function prevSection() {
            document.getElementById('section' + currentSection).classList.remove('active');
            currentSection--;
            document.getElementById('section' + currentSection).classList.add('active');
            updateProgress();
            window.scrollTo(0, 0);
        }

        function selectOption(element, value) {
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            element.setAttribute('data-value', value);
        }

        function checkAnswers2() {
            const questions = document.querySelectorAll('#section2 .question');
            let correct = 0;
            let answered = 0;

            questions.forEach((q, index) => {
                const selected = q.querySelector('.option.selected');
                if (selected) {
                    answered++;
                    const value = selected.getAttribute('data-value');
                    const correctAnswer = answers2['q' + (index + 1)];
                    
                    if (value === correctAnswer) {
                        selected.classList.add('correct');
                        correct++;
                    } else {
                        selected.classList.add('incorrect');
                        q.querySelectorAll('.option').forEach(opt => {
                            if (opt.getAttribute('data-value') === correctAnswer) {
                                opt.classList.add('correct');
                            }
                        });
                    }
                }
            });

            const feedback = document.getElementById('feedback2');
            if (answered < questions.length) {
                feedback.className = 'feedback incorrect show';
                feedback.innerHTML = '‚ö†Ô∏è Please answer all questions!';
            } else {
                scores.section2 = correct;
                feedback.className = 'feedback ' + (correct === questions.length ? 'correct' : 'incorrect') + ' show';
                feedback.innerHTML = `‚úì You got ${correct} out of ${questions.length} correct!`;
                document.getElementById('next2').style.display = 'inline-block';
            }
        }

        function checkAnswers3() {
            let correct = 0;
            let total = 12;
            let allFilled = true;

            for (let key in answers3) {
                const input = document.getElementById(key);
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswers = answers3[key];
                
                if (userAnswer === '') {
                    allFilled = false;
                    continue;
                }
                
                const isCorrect = correctAnswers.some(ans => userAnswer === ans.toLowerCase());
                
                if (isCorrect) {
                    input.classList.remove('incorrect');
                    input.classList.add('correct');
                    correct++;
                } else {
                    input.classList.remove('correct');
                    input.classList.add('incorrect');
                }
            }

            const feedback = document.getElementById('feedback3');
            if (!allFilled) {
                feedback.className = 'feedback incorrect show';
                feedback.innerHTML = '‚ö†Ô∏è Please fill in all gaps!';
            } else {
                scores.section3 = correct;
                feedback.className = 'feedback ' + (correct === total ? 'correct' : 'incorrect') + ' show';
                feedback.innerHTML = `‚úì You got ${correct} out of ${total} correct!`;
                document.getElementById('next3').style.display = 'inline-block';
            }
        }

        function checkAnswers4() {
            const questions = document.querySelectorAll('#section4 .question');
            let correct = 0;
            let answered = 0;

            questions.forEach((q, index) => {
                const selected = q.querySelector('.option.selected');
                if (selected) {
                    answered++;
                    const value = selected.getAttribute('data-value');
                    const correctAnswer = answers4['q' + (index + 1)];
                    
                    if (value === correctAnswer) {
                        selected.classList.add('correct');
                        correct++;
                    } else {
                        selected.classList.add('incorrect');
                        q.querySelectorAll('.option').forEach(opt => {
                            if (opt.getAttribute('data-value') === correctAnswer) {
                                opt.classList.add('correct');
                            }
                        });
                    }
                }
            });

            const feedback = document.getElementById('feedback4');
            if (answered < questions.length) {
                feedback.className = 'feedback incorrect show';
                feedback.innerHTML = '‚ö†Ô∏è Please answer all questions!';
            } else {
                scores.section4 = correct;
                feedback.className = 'feedback ' + (correct === questions.length ? 'correct' : 'incorrect') + ' show';
                feedback.innerHTML = `‚úì You got ${correct} out of ${questions.length} correct!`;
                document.getElementById('next4').style.display = 'inline-block';
            }
        }

        function checkAnswers5() {
            let correct = 0;
            let total = 10;
            let allFilled = true;

            for (let key in answers5) {
                const input = document.getElementById(key);
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswers = answers5[key];
                
                if (userAnswer === '') {
                    allFilled = false;
                    continue;
                }
                
                const isCorrect = correctAnswers.some(ans => userAnswer === ans.toLowerCase());
                
                if (isCorrect) {
                    input.classList.remove('incorrect');
                    input.classList.add('correct');
                    correct++;
                } else {
                    input.classList.remove('correct');
                    input.classList.add('incorrect');
                }
            }

            const feedback = document.getElementById('feedback5');
            if (!allFilled) {
                feedback.className = 'feedback incorrect show';
                feedback.innerHTML = '‚ö†Ô∏è Please fill in all gaps!';
            } else {
                scores.section5 = correct;
                feedback.className = 'feedback ' + (correct === total ? 'correct' : 'incorrect') + ' show';
                feedback.innerHTML = `‚úì You got ${correct} out of ${total} correct!`;
                document.getElementById('next5').style.display = 'inline-block';
            }
        }

        function checkAnswers6() {
            const questions = document.querySelectorAll('#section6 .question');
            let correct = 0;
            let answered = 0;

            questions.forEach((q, index) => {
                const selected = q.querySelector('.option.selected');
                if (selected) {
                    answered++;
                    const value = selected.getAttribute('data-value');
                    const correctAnswer = answers6['q' + (index + 1)];
                    
                    if (value === correctAnswer) {
                        selected.classList.add('correct');
                        correct++;
                    } else {
                        selected.classList.add('incorrect');
                        q.querySelectorAll('.option').forEach(opt => {
                            if (opt.getAttribute('data-value') === correctAnswer) {
                                opt.classList.add('correct');
                            }
                        });
                    }
                }
            });

            const feedback = document.getElementById('feedback6');
            if (answered < questions.length) {
                feedback.className = 'feedback incorrect show';
                feedback.innerHTML = '‚ö†Ô∏è Please answer all questions!';
            } else {
                scores.section6 = correct;
                feedback.className = 'feedback ' + (correct === questions.length ? 'correct' : 'incorrect') + ' show';
                feedback.innerHTML = `‚úì You got ${correct} out of ${questions.length} correct!`;
                document.getElementById('next6').style.display = 'inline-block';
            }
        }

        function savePersonalAnswers() {
            const answers = [];
            for (let i = 1; i <= 4; i++) {
                const value = document.getElementById('personal' + i).value.trim();
                if (value) answers.push(value);
            }

            const feedback = document.getElementById('feedback7');
            if (answers.length === 0) {
                feedback.className = 'feedback incorrect show';
                feedback.innerHTML = '‚ö†Ô∏è Please write at least one answer before continuing!';
            } else {
                feedback.className = 'feedback correct show';
                feedback.innerHTML = `‚úì Great work! You wrote ${answers.length} reflection${answers.length > 1 ? 's' : ''}. Let's continue!`;
                setTimeout(() => {
                    nextSection();
                }, 1500);
            }
        }

        function saveAdviceAnswers() {
            const answers = [];
            for (let i = 1; i <= 4; i++) {
                const value = document.getElementById('advice' + i).value.trim();
                if (value) answers.push(value);
            }

            const feedback = document.getElementById('feedback8');
            if (answers.length === 0) {
                feedback.className = 'feedback incorrect show';
                feedback.innerHTML = '‚ö†Ô∏è Please write at least one piece of advice before finishing!';
            } else {
                feedback.className = 'feedback correct show';
                feedback.innerHTML = `‚úì Excellent! You wrote ${answers.length} reflection${answers.length > 1 ? 's' : ''} about your past. Moving to completion...`;
                
                // Calculate final score including the objective exercises only
                const totalScore = scores.section2 + scores.section3 + scores.section4 + scores.section5 + scores.section6;
                const maxScore = 6 + 12 + 5 + 10 + 6;
                document.getElementById('finalScore').innerHTML = `Your score on objective exercises: ${totalScore} / ${maxScore} (${Math.round((totalScore/maxScore)*100)}%)<br><br>Plus ${answers.length + document.querySelectorAll('#section7 textarea').length} personal reflections completed!`;
                
                setTimeout(() => {
                    nextSection();
                }, 2000);
            }
        }

        function restartExercise() {
            location.reload();
        }

        // Initialize
        updateProgress();
    </script>
</body>
</html>